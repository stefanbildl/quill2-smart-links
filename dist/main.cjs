"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const p=/https?:\/\/[^\s]+/;class m{constructor(e,a){e.on("text-change",function(d){const t=e.getSelection(!1)?.index;if(t===null||typeof t>"u")return;const[o]=e.getLeaf(t);if(o==null)return;const[f]=d?.ops?.filter(s=>s.insert)?.map(s=>s.insert)??[null],r=o.value();if(!r||typeof r!="string"||o.parent.domNode.localName==="a")return;const u=[`
`,"	"].find(s=>s===f),x=a.linkRegex??p,[n]=r.match(x)??[null];if(n===null)return;const i=r.indexOf(n);if(i===null)return;const c=e.getIndex(o),l=c+i,g=l+n.length;!u&&t<=g&&t>l||(e.deleteText(c+i,n.length,"api"),e.insertText(c+i,n,"link",n))})}}exports.SmartLinks=m;
