"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=/https?:\/\/[^\s]+/;class p{constructor(e){e.on("text-change",function(d){const c=e.getSelection(!1),t=c==null?void 0:c.index;if(t===null||typeof t>"u")return;const[r]=e.getLeaf(t);if(r==null)return;const[f]=d.ops.filter(s=>s.insert).map(s=>s.insert)??[null],o=r.value();if(!o||typeof o!="string"||r.parent.domNode.localName==="a")return;const u=[`
`,"	"].find(s=>s===f),[n]=o.match(g)??[null];if(n===null)return;const i=o.indexOf(n);if(i===null)return;const a=e.getIndex(r),l=a+i,x=l+n.length;!u&&t<=x&&t>l||(e.deleteText(a+i,n.length,"api"),e.insertText(a+i,n,"link",n))})}}exports.SmartLinks=p;
